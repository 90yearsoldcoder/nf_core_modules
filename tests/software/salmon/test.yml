- name: salmon index
  command: nextflow run ./tests/software/salmon -profile docker -entry test_salmon_index -c tests/config/nextflow.config
  tags:
    - salmon
    - salmon_index
  files:
    - path: ./output/salmon/salmon/info.json
      md5sum: 61ff4d3471134c280668355ddd39e99f
      should_exist: true
    - path: ./output/salmon/salmon/mphf.bin
      md5sum: 53669a47610e33e031faafd32703b714
      should_exist: true
    - path: ./output/salmon/salmon/complete_ref_lens.bin
      md5sum: f57562f1fca3ae7b133f895ae13c3d08
      should_exist: true
    - path: ./output/salmon/salmon/ref_indexing.log
      should_exist: true
    - path: ./output/salmon/salmon/versionInfo.json
      md5sum: 204865f645102587c4953fccb256797c
      should_exist: true
    - path: ./output/salmon/salmon/seq.bin
      should_exist: true
    - path: ./output/salmon/salmon/pre_indexing.log
      should_exist: true
    - path: ./output/salmon/salmon/rank.bin
      md5sum: 3f34dca1ec26cdf89a6d19b1d1c07e71
      should_exist: true
    - path: ./output/salmon/salmon/reflengths.bin
      md5sum: f57562f1fca3ae7b133f895ae13c3d08
      should_exist: true
    - path: ./output/salmon/salmon/ctable.bin
      should_exist: true
    - path: ./output/salmon/salmon/ctg_offsets.bin
      md5sum: 27a76542337df436436e66017f66dd25
      should_exist: true
    - path: ./output/salmon/salmon/pos.bin
      should_exist: true
    - path: ./output/salmon/salmon/duplicate_clusters.tsv
      md5sum: 51b5292e3a874119c0e1aa566e95d70c
      should_exist: true
    - path: ./output/salmon/salmon/refAccumLengths.bin
      md5sum: 8d1970505b2b08ca0eb5ff7722b48cde
      should_exist: true
    - path: ./output/salmon/salmon/refseq.bin
      md5sum: 79c4ddf34be3a98d5a7b9d153629a6f7
      should_exist: true

- name: salmon quant paired end
  command: nextflow run ./tests/software/salmon -profile docker -entry test_salmon_quant_pe -c tests/config/nextflow.config
  tags:
    - salmon
    - salmon_quant
    - salmon_quant_pe
  files:
    - path: ./output/salmon/salmon/pos.bin
      should_exist: true
    - path: ./output/salmon/salmon/versionInfo.json
      md5sum: 204865f645102587c4953fccb256797c
      should_exist: true
    - path: ./output/salmon/salmon/complete_ref_lens.bin
      md5sum: f57562f1fca3ae7b133f895ae13c3d08
      should_exist: true
    - path: ./output/salmon/test/lib_format_counts.json
      md5sum: a8b6e6bfbc28c6e790ddaec559fad9ea
      should_exist: true
    - path: ./output/salmon/test/aux_info/expected_bias.gz
      md5sum: 24ee10af39b41ecf4f4e08faaaf537ee
      should_exist: true
    - path: ./output/salmon/test/libParams/flenDist.txt
      md5sum: f90c7256c9b18d4131f4d4ecb69d0f55
      should_exist: true
    - path: ./output/salmon/salmon/ref_indexing.log
      should_exist: true
    - path: ./output/salmon/test/aux_info/observed_bias_3p.gz
      md5sum: ef13c06a538e9c34ca9f84212c82f44e
      should_exist: true
    - path: ./output/salmon/salmon/ctable.bin
      should_exist: true
    - path: ./output/salmon/test/aux_info/meta_info.json
      should_exist: true
    - path: ./output/salmon/test/aux_info/fld.gz
      should_exist: true
    - path: ./output/salmon/salmon/refseq.bin
      md5sum: 79c4ddf34be3a98d5a7b9d153629a6f7
      should_exist: true
    - path: ./output/salmon/salmon/info.json
      md5sum: 61ff4d3471134c280668355ddd39e99f
      should_exist: true
    - path: ./output/salmon/salmon/seq.bin
      should_exist: true
    - path: ./output/salmon/test/cmd_info.json
      md5sum: 007676e4d79de0809a03e0ea045ed4a1
      should_exist: true
    - path: ./output/salmon/test/aux_info/observed_bias.gz
      md5sum: ef13c06a538e9c34ca9f84212c82f44e
      should_exist: true
    - path: ./output/salmon/salmon/duplicate_clusters.tsv
      md5sum: 51b5292e3a874119c0e1aa566e95d70c
      should_exist: true
    - path: ./output/salmon/test/quant.genes.sf
      md5sum: eb3e7b44801a0b3af07c25963927e20d
      should_exist: true
    - path: ./output/salmon/salmon/rank.bin
      md5sum: 3f34dca1ec26cdf89a6d19b1d1c07e71
      should_exist: true
    - path: ./output/salmon/salmon/mphf.bin
      md5sum: 53669a47610e33e031faafd32703b714
      should_exist: true
    - path: ./output/salmon/test/aux_info/ambig_info.tsv
      md5sum: 950001575c24fb6bc2c7a6848043b126
      should_exist: true
    - path: ./output/salmon/test/logs/salmon_quant.log
      should_exist: true
    - path: ./output/salmon/salmon/pre_indexing.log
      should_exist: true
    - path: ./output/salmon/salmon/refAccumLengths.bin
      md5sum: 8d1970505b2b08ca0eb5ff7722b48cde
      should_exist: true
    - path: ./output/salmon/test/quant.sf
      md5sum: addb78e233f248b8f62cae3e217bf689
      should_exist: true
    - path: ./output/salmon/salmon/reflengths.bin
      md5sum: f57562f1fca3ae7b133f895ae13c3d08
      should_exist: true
    - path: ./output/salmon/salmon/ctg_offsets.bin
      md5sum: 27a76542337df436436e66017f66dd25
      should_exist: true

- name: salmon quant single-end
  command: nextflow run ./tests/software/salmon -profile docker -entry test_salmon_quant_se -c tests/config/nextflow.config
  tags:
    - salmon
    - salmon_quant
    - salmon_quant_se
  files:
    - path: ./output/salmon/salmon/versionInfo.json
      md5sum: 204865f645102587c4953fccb256797c
      should_exist: true
    - path: ./output/salmon/salmon/ctg_offsets.bin
      md5sum: 27a76542337df436436e66017f66dd25
      should_exist: true
    - path: ./output/salmon/test/aux_info/meta_info.json
      should_exist: true
    - path: ./output/salmon/salmon/duplicate_clusters.tsv
      md5sum: 51b5292e3a874119c0e1aa566e95d70c
      should_exist: true
    - path: ./output/salmon/salmon/pre_indexing.log
      should_exist: true
    - path: ./output/salmon/salmon/rank.bin
      md5sum: 3f34dca1ec26cdf89a6d19b1d1c07e71
      should_exist: true
    - path: ./output/salmon/test/aux_info/observed_bias.gz
      md5sum: ef13c06a538e9c34ca9f84212c82f44e
      should_exist: true
    - path: ./output/salmon/test/aux_info/expected_bias.gz
      md5sum: 24ee10af39b41ecf4f4e08faaaf537ee
      should_exist: true
    - path: ./output/salmon/test/aux_info/fld.gz
      should_exist: true
    - path: ./output/salmon/salmon/ctable.bin
      should_exist: true
    - path: ./output/salmon/salmon/info.json
      md5sum: 61ff4d3471134c280668355ddd39e99f
      should_exist: true
    - path: ./output/salmon/test/quant.genes.sf
      md5sum: 5b39785b4d8da533c08ee4a6c8bc1211
      should_exist: true
    - path: ./output/salmon/salmon/refseq.bin
      md5sum: 79c4ddf34be3a98d5a7b9d153629a6f7
      should_exist: true
    - path: ./output/salmon/salmon/complete_ref_lens.bin
      md5sum: f57562f1fca3ae7b133f895ae13c3d08
      should_exist: true
    - path: ./output/salmon/test/logs/salmon_quant.log
      should_exist: true
    - path: ./output/salmon/test/libParams/flenDist.txt
      md5sum: 2de170bdc9f6fd237d286429b292bb28
      should_exist: true
    - path: ./output/salmon/salmon/ref_indexing.log
      should_exist: true
    - path: ./output/salmon/salmon/refAccumLengths.bin
      md5sum: 8d1970505b2b08ca0eb5ff7722b48cde
      should_exist: true
    - path: ./output/salmon/salmon/seq.bin
      should_exist: true
    - path: ./output/salmon/salmon/mphf.bin
      md5sum: 53669a47610e33e031faafd32703b714
      should_exist: true
    - path: ./output/salmon/test/aux_info/observed_bias_3p.gz
      md5sum: ef13c06a538e9c34ca9f84212c82f44e
      should_exist: true
    - path: ./output/salmon/test/lib_format_counts.json
      md5sum: aca0a40187eb407b1b8fc85c01284583
      should_exist: true
    - path: ./output/salmon/salmon/reflengths.bin
      md5sum: f57562f1fca3ae7b133f895ae13c3d08
      should_exist: true
    - path: ./output/salmon/salmon/pos.bin
      should_exist: true
    - path: ./output/salmon/test/cmd_info.json
      md5sum: d95f9bd2287a55fa44bbd9b9d4c4ff8a
      should_exist: true
    - path: ./output/salmon/test/aux_info/ambig_info.tsv
      md5sum: c3306d26186ffe018ad4f19d52256180
      should_exist: true
    - path: ./output/salmon/test/quant.sf
      md5sum: b08095ac70f89efc3146cdf488d0eb73
      should_exist: true
