- name: gatk4 markduplicatesspark test_gatk4_markduplicates_spark
  command: nextflow run ./tests/modules/gatk4/markduplicatesspark -entry test_gatk4_markduplicates_spark -c ./tests/config/nextflow.config  -c ./tests/modules/gatk4/markduplicatesspark/nextflow.config
  tags:
    - gatk4
    - gatk4/markduplicatesspark
  files:
    - path: output/gatk4/test.bam
      md5sum: dc1a09ac6371aab7c50d1a554baa06d3

- name: gatk4 markduplicatesspark test_gatk4_markduplicates_spark_multiple_bams
  command: nextflow run ./tests/modules/gatk4/markduplicatesspark -entry test_gatk4_markduplicates_spark_multiple_bams -c ./tests/config/nextflow.config  -c ./tests/modules/gatk4/markduplicatesspark/nextflow.config
  tags:
    - gatk4
    - gatk4/markduplicatesspark
  files:
    - path: output/gatk4/test.bam
      md5sum: 898cb0a6616897d8ada90bab53bf0837

- name: gatk4 markduplicatesspark test_gatk4_markduplicates_spark_multiple_bams_metrics
  command: nextflow run ./tests/modules/gatk4/markduplicatesspark -entry test_gatk4_markduplicates_spark_multiple_bams_metrics -c ./tests/config/nextflow.config  -c ./tests/modules/gatk4/markduplicatesspark/nextflow.config
  tags:
    - gatk4
    - gatk4/markduplicatesspark
  files:
    - path: output/gatk4/test.bam
      md5sum: 898cb0a6616897d8ada90bab53bf0837
    - path: output/gatk4/test.metrics
      contains: '[ ## METRICS CLASS        org.broadinstitute.hellbender.utils.read.markduplicates.GATKDuplicationMetrics
                  LIBRARY UNPAIRED_READS_EXAMINED READ_PAIRS_EXAMINED     SECONDARY_OR_SUPPLEMENTARY_RDS  UNMAPPED_READS  UNPAIRED_READ_DUPLICATES        READ_PAIR_DUPLICATES    READ_PAIR_OPTICAL_DUPLICATESPERCENT_DUPLICATION      ESTIMATED_LIBRARY_SIZE
                  testN   0       2820    2       2       0       828     0       0.293617        3807
                  testT   0       2718    0       0       0       716     0       0.263429        4206 ]'
